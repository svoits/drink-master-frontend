import{r as o,_ as J,n as Z,o as y,p as K,R as $,T as z,q as E,v as N,s as L,d as j,e as k,f as b,u as q,h as I,i as ee,w as te,j as e,m as _,c as G,A as ne,x as ie,E as A,y as ae,z as re,k as le,B as se,S as oe,D as ue,L as ce}from"./index-9b1d0686.js";import{m as de,d as he,_ as P,a as D,S as R}from"./react-select.esm-c1dab680.js";import{s as pe}from"./drinks-selectors-db0f3074.js";import{P as me}from"./PageTitle-5511ed47.js";function U(r,t){var n=function(a){return t&&o.isValidElement(a)?t(a):a},l=Object.create(null);return r&&o.Children.map(r,function(i){return i}).forEach(function(i){l[i.key]=n(i)}),l}function ve(r,t){r=r||{},t=t||{};function n(v){return v in t?t[v]:r[v]}var l=Object.create(null),i=[];for(var a in r)a in t?i.length&&(l[a]=i,i=[]):i.push(a);var s,u={};for(var c in t){if(l[c])for(s=0;s<l[c].length;s++){var p=l[c][s];u[l[c][s]]=n(p)}u[c]=n(c)}for(s=0;s<i.length;s++)u[i[s]]=n(i[s]);return u}function S(r,t,n){return n[t]!=null?n[t]:r.props[t]}function ge(r,t){return U(r.children,function(n){return o.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:S(n,"appear",r),enter:S(n,"enter",r),exit:S(n,"exit",r)})})}function xe(r,t,n){var l=U(r.children),i=ve(t,l);return Object.keys(i).forEach(function(a){var s=i[a];if(o.isValidElement(s)){var u=a in t,c=a in l,p=t[a],v=o.isValidElement(p)&&!p.props.in;c&&(!u||v)?i[a]=o.cloneElement(s,{onExited:n.bind(null,s),in:!0,exit:S(s,"exit",r),enter:S(s,"enter",r)}):!c&&u&&!v?i[a]=o.cloneElement(s,{in:!1}):c&&u&&o.isValidElement(p)&&(i[a]=o.cloneElement(s,{onExited:n.bind(null,s),in:p.props.in,exit:S(s,"exit",r),enter:S(s,"enter",r)}))}}),i}var fe=Object.values||function(r){return Object.keys(r).map(function(t){return r[t]})},je={component:"div",childFactory:function(t){return t}},O=function(r){J(t,r);function t(l,i){var a;a=r.call(this,l,i)||this;var s=a.handleExited.bind(Z(a));return a.state={contextValue:{isMounting:!0},handleExited:s,firstRender:!0},a}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,a){var s=a.children,u=a.handleExited,c=a.firstRender;return{children:c?ge(i,u):xe(i,s,u),firstRender:!1}},n.handleExited=function(i,a){var s=U(this.props.children);i.key in s||(i.props.onExited&&i.props.onExited(a),this.mounted&&this.setState(function(u){var c=y({},u.children);return delete c[i.key],{children:c}}))},n.render=function(){var i=this.props,a=i.component,s=i.childFactory,u=K(i,["component","childFactory"]),c=this.state.contextValue,p=fe(this.state.children).map(s);return delete u.appear,delete u.enter,delete u.exit,a===null?$.createElement(z.Provider,{value:c},p):$.createElement(z.Provider,{value:c},$.createElement(a,u,p))},t}($.Component);O.propTypes={};O.defaultProps=je;const W=O;var Ee=["in","onExited","appear","enter","exit"],be=function(t){return function(n){n.in,n.onExited,n.appear,n.enter,n.exit;var l=P(n,Ee);return o.createElement(t,l)}},ye=be,Se=["component","duration","in","onExited"],B=function(t){var n=t.component,l=t.duration,i=l===void 0?1:l,a=t.in;t.onExited;var s=P(t,Se),u=o.useRef(null),c={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(i,"ms")},exiting:{opacity:0},exited:{opacity:0}};return o.createElement(N,{mountOnEnter:!0,unmountOnExit:!0,in:a,timeout:i,nodeRef:u},function(p){var v={style:E({},c[p]),ref:u};return o.createElement(n,y({innerProps:v},s))})},T=260,Ce=function(t){var n=t.children,l=t.in,i=t.onExited,a=o.useRef(null),s=o.useState("auto"),u=D(s,2),c=u[0],p=u[1];o.useEffect(function(){var f=a.current;if(f){var m=window.requestAnimationFrame(function(){return p(f.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(m)}}},[]);var v=function(m){switch(m){default:return{width:c};case"exiting":return{width:0,transition:"width ".concat(T,"ms ease-out")};case"exited":return{width:0}}};return o.createElement(N,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:l,onExited:function(){var m=a.current;m&&(i==null||i(m))},timeout:T,nodeRef:a},function(f){return o.createElement("div",{ref:a,style:E({overflow:"hidden",whiteSpace:"nowrap"},v(f))},n)})},Ve=["in","onExited"],Pe=function(t){return function(n){var l=n.in,i=n.onExited,a=P(n,Ve);return o.createElement(Ce,{in:l,onExited:i},o.createElement(t,y({cropWithEllipsis:l},a)))}},Me=Pe,Fe=function(t){return function(n){return o.createElement(B,y({component:t,duration:n.isMulti?T:1},n))}},Ae=Fe,Ie=function(t){return function(n){return o.createElement(B,y({component:t},n))}},we=Ie,$e=["component"],ke=["children"],Re=function(t){return function(n){return n.isMulti?o.createElement(qe,y({component:t},n)):o.createElement(W,y({component:t},n))}},qe=function(t){var n=t.component,l=P(t,$e),i=De(l);return o.createElement(W,y({component:n},i))},De=function(t){var n=t.children,l=P(t,ke),i=l.isMulti,a=l.hasValue,s=l.innerProps,u=l.selectProps,c=u.components,p=u.controlShouldRenderValue,v=o.useState(i&&p&&a),f=D(v,2),m=f[0],C=f[1],M=o.useState(!1),x=D(M,2),d=x[0],g=x[1];o.useEffect(function(){a&&!m&&C(!0)},[a,m]),o.useEffect(function(){d&&!a&&m&&C(!1),g(!1)},[d,a,m]);var h=function(){return g(!0)},V=function(F){if(i&&o.isValidElement(F)){if(F.type===c.MultiValue)return o.cloneElement(F,{onExited:h});if(F.type===c.Placeholder&&m)return null}return F},X=E(E({},s),{},{style:E(E({},s==null?void 0:s.style),{},{display:i&&a||m?"flex":"grid"})}),Y=E(E({},l),{},{innerProps:X,children:o.Children.toArray(n).map(V)});return Y},Te=Re,Le=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],Q=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=he({components:t}),l=n.Input,i=n.MultiValue,a=n.Placeholder,s=n.SingleValue,u=n.ValueContainer,c=P(n,Le);return E({Input:ye(l),MultiValue:Me(i),Placeholder:Ae(a),SingleValue:we(s),ValueContainer:Te(u)},c)},w=Q();w.Input;w.MultiValue;w.Placeholder;w.SingleValue;w.ValueContainer;var _e=de(Q);const Ge=L.label`
    display: block;
    width: 335px;
    height: 320px;
`,Ue=L.img`
    max-width: 100%;
    max-height: 100%;
    width: auto;
    height: auto;
`,Oe=L(j)`
    position: absolute;
    width: 0;
    height: 0;
    opacity: 0;
    visibility: hidden;
    overflow: hidden;
`,ze=k().shape({photo:b().required("Cocktail photo is a mandatory field").url(),title:b().required("Cocktail title is a mandatory field").min(3,"Cocktail name must contain at least 3 symbols"),recipe:b().required("Description of the cocktail is a mandatory field").min(10,"The cocktail description must contain at least 10 symbols"),category:b().required("Cocktail category is a required field"),glasses:b().required("Cocktail glasses is a required field")}),Ne=_e(),We=({formData:r,setFormData:t,handleSubmit:n})=>{const l=q(),i=I(d=>d.filters.categories),a=I(d=>d.filters.glasses),[s,u]=o.useState(null),[c,p]=o.useState(!1),[v,f]=o.useState(null),[m,C]=o.useState(null);o.useEffect(()=>{l(ee()),l(te())},[l]);const M=d=>{const g=d.target.files[0];if(g){const h=URL.createObjectURL(g);t({...r,photo:g}),u(h)}},x=()=>{t({...r,photo:null}),u(null),p(!1)};return e.jsx("div",{children:e.jsx(_,{initialValues:r,validationSchema:ze,onSubmit:d=>{t({...r,...d}),n()},children:e.jsxs(G,{children:[e.jsxs(Ge,{htmlFor:"photo",children:[e.jsx(Oe,{type:"file",id:"photo",name:"photo",onChange:M,style:{display:"none"}}),c?e.jsxs("button",{type:"button",onClick:x,children:[e.jsx(ne,{}),"Delete image"]}):e.jsxs("button",{type:"button",children:[e.jsx(ie,{})," Add image"]}),s&&e.jsx(Ue,{src:s,alt:"Preview"}),e.jsx(A,{name:"photo",component:"div"})]}),e.jsx(j,{name:"title",placeholder:"Enter item title"}),e.jsx(A,{name:"title",component:"div"}),e.jsx(j,{name:"recipe",placeholder:"Enter about recipe"}),e.jsx(A,{name:"recipe",component:"div"}),e.jsx("label",{htmlFor:"category",children:e.jsx(j,{name:"category",children:({field:d,form:g})=>e.jsx(R,{closeMenuOnSelect:!0,isClearable:!0,classNames:{control:h=>h.isFocused?"border-orange-600":"border-grey-300"},options:i.map(h=>({value:h,label:h})),name:d.name,id:"categories",...d,value:v?{value:v,label:v}:null,onChange:h=>{f(h?h.value:null),g.setFieldValue("categories",h?h.value:null)},placeholder:"Category"})})}),e.jsx("label",{htmlFor:"glasses",children:e.jsx(j,{name:"glasses",children:({field:d,form:g})=>e.jsx(R,{closeMenuOnSelect:!0,components:Ne,isClearable:!0,classNames:{control:h=>h.isFocused?"border-orange-600":"border-grey-300"},options:a.map(h=>({value:h,label:h})),name:d.name,id:"glasses",...d,value:m?{value:m,label:m}:null,onChange:h=>{C(h?h.value:null),g.setFieldValue("glasses",h?h.value:null)},placeholder:"Glasses"})})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx(j,{type:"radio",name:"strength",value:"alcoholic"}),e.jsx("span",{children:"Alcoholic"})]})}),e.jsx("div",{children:e.jsxs("label",{children:[e.jsx(j,{type:"radio",name:"strength",value:"nonAlcoholic"}),e.jsx("span",{children:"Non-alcoholic"})]})})]})})})},Be=[{value:"ml",label:"ml"},{value:"oz",label:"oz"},{value:"cl",label:"cl"},{value:"tsp",label:"tsp"},{value:"pinch",label:"pinch"},{value:"sprigs",label:"sprigs"},{value:"cup",label:"cup"},{value:"cups",label:"cups"},{value:"tblsp",label:"tblsp"}],Qe=k().shape({ingredients:ae().of(k().shape({ingredient:b().required("The ingredient is mandatory"),measure:b().required("Measure is mandatory"),quantity:re().typeError("The quantity must be a number").positive("The number must be positive").required("Quantity is required")}))}),Xe=({formData:r,setFormData:t,handleSubmit:n})=>{const l=q(),[i,a]=o.useState(null),[s,u]=o.useState(null),[c,p]=o.useState(3),v=I(x=>x.filters.ingredients),f=10,m=(x,d)=>{a(x),u(x),d.setFieldValue("ingredients",x?x.value:"")};o.useEffect(()=>{l(le())},[l]);const C=()=>{c<f&&p(c+1)},M=()=>{c>1&&p(c-1)};return e.jsxs("div",{children:[e.jsx("h2",{children:"Ingredients"}),e.jsxs("div",{children:[e.jsx("button",{type:"button",onClick:M,children:"-"}),e.jsx("span",{children:c}),e.jsx("button",{type:"button",onClick:C,children:"+"})]}),e.jsx(_,{initialValues:r,validationSchema:Qe,onSubmit:x=>{t({...r,...x}),n()},children:e.jsx(G,{children:[...Array(c)].map((x,d)=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:`ingredient${d}`,children:e.jsx(j,{name:`ingredient${d}`,children:({field:g,form:h})=>e.jsx(R,{closeMenuOnSelect:!0,isMulti:!1,isClearable:!0,options:v.map(({title:V})=>({value:V,label:V})),name:g.name,id:`ingredient${d}`,...g,value:i,onChange:V=>m(V,h),placeholder:""})})}),e.jsxs("div",{children:[e.jsx(j,{name:`quantity${d}`,placeholder:"Enter the quantity"}),e.jsx(A,{name:`quantity${d}`,component:"div"}),e.jsx("label",{htmlFor:`measure${d}`,children:e.jsx(R,{options:Be,name:`measure${d}`,value:s,onChange:g=>u(g),placeholder:"cl"})}),e.jsx("button",{children:"X"})]})]},d))})})]})},Ye=k().shape({textareaRecipe:b().min(100,"You need to add a description of at least 100 symbols")}),He=({formData:r,setFormData:t,handleSubmit:n})=>e.jsx(e.Fragment,{children:e.jsx(_,{initialValues:r,validationSchema:Ye,onSubmit:l=>{t({...r,...l}),n()},children:e.jsxs(G,{children:[e.jsx("h2",{htmlFor:"textareaRecipe",children:"Recipe Preparation"}),e.jsx(j,{name:"textareaRecipe",children:({field:l})=>e.jsx("textarea",{...l,id:"textareaValue",placeholder:"Enter the recipe"})}),e.jsx(A,{name:"textareaValue",component:"div"})]})})}),Je=()=>{const r=q(),[t,n]=o.useState({photo:"",title:"",recipe:"",category:"",glasses:"",strength:"",ingredients:[{ingredient:"",measure:"",quantity:""},{ingredient:"",measure:"",quantity:""},{ingredient:"",measure:"",quantity:""}],textareaRecipe:""}),l=()=>{r(se(t)),console.log(t)};return e.jsxs(e.Fragment,{children:[e.jsx(We,{formData:t,setFormData:n}),e.jsx(Xe,{formData:t,setFormData:n}),e.jsx(He,{formData:t,setFormData:n}),e.jsx("button",{type:"button",onClick:l,children:"Add"})]})},Ze=Je,Ke=()=>e.jsxs("div",{children:[e.jsx("h3",{children:"Follow Us"}),e.jsx(oe,{})]}),et=Ke,tt=()=>{const r=q(),t=I(i=>i.drinks.popularDrinks),{isLoading:n,error:l}=I(pe);return o.useEffect(()=>{r(ue())},[r]),e.jsxs("div",{children:[n&&e.jsx(ce,{}),l&&e.jsx("p",{children:"Sorry. There are no images ... 😭"}),e.jsx("ul",{children:t.map(({_id:i,drinkThumb:a,drink:s,shortDescription:u})=>e.jsx("li",{children:e.jsxs("a",{href:`/api/drinks/popular/${i}`,children:[e.jsx("img",{src:a,alt:s,width:90,height:90}),e.jsx("h3",{children:s}),e.jsx("p",{children:u})]})},i))})]})},nt=tt;function st(){return e.jsxs("div",{children:[e.jsx(me,{title:"Add drink"}),e.jsx(Ze,{}),e.jsx(et,{}),e.jsx(nt,{})]})}export{st as default};
